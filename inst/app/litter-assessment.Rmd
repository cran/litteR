## Threshold Assessment


In this section, we will test the null-hypothesis:

H<sub>0</sub>: the distribution of `r THRESHOLD_TYPE` is symmetric about the threshold value (TV = `r THRESHOLD_VALUE`)

against the alternative hypothesis:

H<sub>1</sub>: the distribution of `r THRESHOLD_TYPE` is less than the threshold value (TV = `r THRESHOLD_VALUE`)

by means of a one-tailed Wilcoxon signed rank test.

<p><br/></p>


The first table below gives for litter type `r THRESHOLD_TYPE` for each location:

- the assessment value (AV), _i.e._, the `r ASSESSMENT_STATISTIC` over the assessment period (`r DATE_FROM` to `r DATE_TO`);
- the threshold value (TV);
- the difference between the assessment value (AV) and the threshold value (TV = `r THRESHOLD_VALUE` for `r THRESHOLD_TYPE`);
- the p-value of the Wilcoxon-test formulated above.



The remaining tables below give for several spatial scales:

- the number of survey locations;
- the percentage of survey locations for which the null hypothesis given above has been rejected (&alpha;= `r ALPHA`). That is, the distribution of `r THRESHOLD_TYPE` is significantly less than the threshold value (TV = `r THRESHOLD_VALUE`).



### Location level


```{r}
d <- d_ltr %>%
    filter(type_name == THRESHOLD_TYPE) %>%
    group_by(region_name, country_code, location_name, type_name) %>%
    summarise(
        AV = get(ASSESSMENT_STATISTIC)(abundance),
        TV = THRESHOLD_VALUE,
        `AV-TV` = AV - TV,
        p_value = p_value(wilcoxon(abundance, type = "less", mu = THRESHOLD_VALUE))) %>%
    ungroup 

show_country_region_level <- (d %>%
    group_by(country_code, region_name) %>%
    summarise(n = n()) %>%
    nrow) > 1

d %>%
    select(-region_name, -country_code) %>%
    mutate_if(is.double, formatC, format = "fg", digits = 3) %>%
    kable(align = "llrrrr")

```


```{r eval=show_country_region_level, results='asis'}
cat("### Country-regional level\n")

```

```{r eval=show_country_region_level}
d %>%
    group_by(country_code, region_name) %>%
    summarise(
        `# locations` = n(), 
        `% significant` = 100 * mean(p_value < ALPHA)) %>%
    kable(align = "llrr")
```



### Country level

```{r}
d %>%
    group_by(country_code) %>%
    summarise(
        `# locations` = n(), 
        `% significant` = 100 * mean(p_value < ALPHA)) %>%
    kable(align = "llrr")
```


### Regional level

```{r}
d %>%
    group_by(region_name) %>%
    summarise(
        `# locations` = n(), 
        `% significant` = 100 * mean(p_value < ALPHA)) %>%
    kable(align = "llrr")
```